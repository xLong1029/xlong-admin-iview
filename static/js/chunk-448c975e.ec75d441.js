(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-448c975e"],{2061:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"g-content"},[a("p",{staticClass:"hint"},[t._v("注：此页面仅做布局展示，无交互功能")]),a("div",{staticClass:"chat-list-wrap"},[t.pageLoading?a("Loading"):a("div",[t.showChat?a("div",[a("table",{staticClass:"consult-list-chat",attrs:{cellpadding:"0",cellspacing:"0"}},t._l(t.consultList,(function(s,e){return a("tr",{key:e,on:{click:function(s){return t.showModal(e)}}},[a("td",{attrs:{width:"60"}},[a("img",{staticClass:"item-face",attrs:{src:s.face,alt:"图片加载失败"},on:{error:t.notFoundPic}})]),a("td",[a("P",{staticClass:"item-name"},[t._v(t._s(s.userName))]),a("p",{staticClass:"item-content"},[t._v(t._s(s.content))])],1),a("td",{attrs:{width:"90"}},[a("p",[t._v(t._s(s.time))]),a("Badge",{attrs:{count:s.num}})],1)])})),0),a("div",{staticClass:"modal-chat"},[a("h2",{staticClass:"chat-title"},[t._v(" "+t._s(t.chatModal.userName)+" ("+t._s(t.chatModal.id)+") "),a("Icon",{staticClass:"fr",attrs:{type:"android-close"},nativeOn:{click:function(s){return t.closeModal(s)}}})],1),a("div",{staticClass:"chat-content"},t._l(t.message,(function(s,e){return a("ul",{key:e},[1==s.tag?a("li",{staticClass:"msg-left"},[a("img",{staticClass:"msg-face",attrs:{src:t.chatModal.face,alt:"图片加载失败"},on:{error:t.notFoundPic}}),a("div",{staticClass:"msg-content"},[a("span",{staticClass:"msg-time"},[t._v(t._s(s.time))]),a("div",{staticClass:"msg-bg"},[a("div",{staticClass:"msg-arrow"}),a("p",[t._v(t._s(s.text))])])])]):a("li",{staticClass:"msg-right"},[a("img",{staticClass:"msg-face",attrs:{src:t.admin.face,alt:"图片加载失败"},on:{error:t.notFoundPic}}),a("div",{staticClass:"msg-content"},[a("span",{staticClass:"msg-time"},[t._v(t._s(s.time))]),a("div",{staticClass:"msg-bg"},[a("div",{staticClass:"msg-arrow"}),a("p",[t._v(t._s(s.text))])])])])])})),0),a("div",{staticClass:"chat-textarea"},[a("div",{staticClass:"fl textarea"},[a("Input",{attrs:{type:"textarea",placeholder:"可以输入内容，点击发送试试"},model:{value:t.msgContent,callback:function(s){t.msgContent=s},expression:"msgContent"}})],1),a("Button",{staticClass:"fr",staticStyle:{width:"80px",height:"52px"},attrs:{type:"info"},on:{click:t.sendMsg}},[t._v("发送")])],1)])]):a("table",{staticClass:"consult-list-normal",attrs:{cellpadding:"0",cellspacing:"0"}},t._l(t.consultList,(function(s,e){return a("tr",{key:e,on:{click:function(s){return t.showModal(e)}}},[a("td",{staticClass:"item-user"},[a("img",{staticClass:"item-face",attrs:{src:s.face,alt:"图片加载失败"},on:{error:t.notFoundPic}}),a("span",[t._v(t._s(s.userName)+"（"+t._s(s.id)+"）")])]),a("td",{staticClass:"item-content"},[t._v(t._s(s.content))]),a("td",{attrs:{width:"120"}},[t._v(t._s(s.time))]),a("td",{attrs:{width:"40"}},[a("Badge",{attrs:{count:s.num}})],1)])})),0),a("div",{staticClass:"clearfix"}),a("Page",{staticStyle:{"margin-top":"20px"},attrs:{"class-name":"m-page fr","show-elevator":"","show-total":"",total:t.page.dataCount,"page-size":t.page.pageSize,current:t.page.pageNo},on:{"on-change":t.changePage}}),a("div",{staticClass:"clearfix"})],1)],1)])},i=[],n=a("ed08"),c=a("b775"),o={GetConsultList:function(){return Object(c["a"])({url:"/api/consult/list",method:"get"})}},l=a("1b62"),r={mixins:[l["c"]],data:function(){return{pageLoading:!1,showChat:!1,consultInfo:{visible:!1,id:"",userName:""},msgContent:"",admin:{face:""},chatModal:{id:"",userName:"",face:""},message:[],consultList:[{face:"",userName:"",id:"",content:"",time:"",num:0}]}},created:function(){this.init()},methods:{init:function(){var t=this;this.$store.commit("SET_BREADCRUMB",[{name:"首页",path:"/Home"},{name:"消息列表",path:"/Examples/MessageList"}]),o.GetConsultList().then((function(s){var a=s.code,e=s.data,i=s.message;200===a?(t.consultList=e,t.setPage({count:t.consultList.length,pages:t.consultList.length/t.page.pageSize})):t.$Message.warning(i)})).catch((function(t){return console.log(t)}))},showModal:function(t){if(this.showChat=!0,this.chatModal.id=this.consultList[t].id,this.chatModal.userName=this.consultList[t].userName,this.chatModal.face=this.consultList[t].face,this.message=[],this.consultList[t].num>0)for(var s=0;s<this.consultList[t].num;s++)this.message.push({tag:1,time:"2016-06-25 00:00:00",text:this.consultList[t].content})},closeModal:function(){this.showChat=!1},sendMsg:function(){var t=new Date,s=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();this.message.push({tag:2,time:s,text:this.msgContent}),this.msgContent=""},notFoundPic:function(t){Object(n["p"])(t,1)},getTableList:function(){this.$Message.warning("此页面仅做布局展示，无交互功能")}}},u=r,d=(a("2b12"),a("2877")),g=Object(d["a"])(u,e,i,!1,null,"43528dcc",null);s["default"]=g.exports},"2b12":function(t,s,a){"use strict";var e=a("fa90"),i=a.n(e);i.a},fa90:function(t,s,a){}}]);